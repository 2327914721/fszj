import{d as x,G as S,D as i,H as U,i as L,I as h,m as N,w as o,A as R,h as s,a,x as $,E as q,e as w,u as A,C as D,g as k,J as G,o as y,_ as I,c as H}from"./index-CeX8cVBj.js";/* empty css                 */import{r as T}from"./request-C2hzU72E.js";const j="/assets/banner-DIIutIQS.jpg",J=(p={})=>T.post("api/login",p),Q=x({__name:"loginpacel",setup(p){const{appContext:m}=S();i({},m);const l=U();console.log(l);const _=G(),b=()=>{console.log("点击注册"),_.push("/register")},P=async(t={})=>{await J(t).then(e=>{e.data.code===200&&(l.setToken(e.data.data.token),l.setUserInfo(e.data.data.username),localStorage.setItem("avatar",e.data.data.avatar))})},c=L(),C=(t,e,n)=>{if(e==="")n(new Error("请输入账号"));else{if(r.checkPass!==""){if(!c.value)return;c.value.validateField("checkPass")}n()}},F=(t,e,n)=>{e===""?n(new Error("请在此输入密码")):n()},r=h({pass:"",checkPass:""}),V=h({pass:[{validator:C,trigger:"blur"}],checkPass:[{validator:F,trigger:"blur"}]}),E=t=>{t&&t.validate(async e=>{if(e){console.log("submit!");try{await P(r),i({message:"登录成功",type:"success"}),_.push("/")}catch{i({message:"登录失败",type:"error"})}}else i({message:"登录失败",type:"error"})})},z=t=>{t&&t.resetFields()};return(t,e)=>{const n=w("User"),v=q,f=$,d=A,B=w("Lock"),g=D,M=R;return y(),N(M,{ref_key:"ruleFormRef",ref:c,style:{"max-width":"600px"},model:r,"status-icon":"",rules:V,"label-width":"auto",class:"demo-ruleForm login-form"},{default:o(()=>[s(d,{label:"Password",prop:"pass"},{label:o(()=>[s(v,null,{default:o(()=>[s(n)]),_:1})]),default:o(()=>[s(f,{modelValue:r.pass,"onUpdate:modelValue":e[0]||(e[0]=u=>r.pass=u),type:"input",autocomplete:"off",placeholder:"请输入账号"},null,8,["modelValue"])]),_:1}),s(d,{label:"Confirm",prop:"checkPass"},{label:o(()=>[s(v,null,{default:o(()=>[s(B)]),_:1})]),default:o(()=>[s(f,{placeholder:"请输入密码",modelValue:r.checkPass,"onUpdate:modelValue":e[1]||(e[1]=u=>r.checkPass=u),type:"password","show-password":"",autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(d,null,{default:o(()=>[s(g,{plain:!0,type:"primary",onClick:e[2]||(e[2]=u=>E(c.value))},{default:o(()=>e[4]||(e[4]=[k(" 提交 ",-1)])),_:1,__:[4]}),s(g,{onClick:e[3]||(e[3]=u=>z(c.value))},{default:o(()=>e[5]||(e[5]=[k("重置",-1)])),_:1,__:[5]})]),_:1}),a("div",{class:"registerbox"},[a("p",{onClick:b},"点击注册")])]),_:1},8,["model","rules"])}}}),K=I(Q,[["__scopeId","data-v-d1b40c9c"]]),O={class:"container"},W={class:"formsbox"},X=x({__name:"login",setup(p){return(m,l)=>(y(),H("div",O,[l[1]||(l[1]=a("img",{src:j,alt:""},null,-1)),a("div",W,[l[0]||(l[0]=a("p",{class:"fz30"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"styles__StyledSVGIconPathComponent-sc-1sh3oaa-0 cqAulH svg-icon-path-icon fill",viewBox:"0 0 32 32",width:"35",height:"35"},[a("defs"),a("g",null,[a("path",{d:"M25.792 12.544h-0.736v-1.024c0-1.664-1.376-2.976-3.040-2.976h-4.928v-2.496c0.654-0.374 1.088-1.068 1.088-1.864 0-0.009-0-0.017-0-0.026v0.001c0-1.184-0.96-2.176-2.176-2.176s-2.176 0.992-2.176 2.176c0 0.832 0.448 1.504 1.088 1.888v2.464h-4.928c-0.001 0-0.002 0-0.003 0-1.66 0-3.005 1.345-3.005 3.005 0 0.001 0 0.002 0 0.003v-0 1.024h-0.768c-0.928 0-1.696 0.768-1.696 1.728v3.648c0 0.928 0.768 1.696 1.696 1.696h0.768v1.056c0 1.664 1.344 2.976 3.008 2.976h1.408v1.6c0 0.928 0.768 1.696 1.696 1.696h5.824c0.928 0 1.696-0.768 1.696-1.696v-1.6h1.408c1.664 0 3.040-1.312 3.040-2.976v-1.056h0.736c0.928 0 1.696-0.768 1.696-1.696v-3.648c0-0.928-0.768-1.728-1.696-1.728zM9.408 13.696c0-1.088 0.896-1.984 1.984-1.984s1.984 0.896 1.984 1.984-0.896 1.984-1.984 1.984c-0.003 0-0.007 0-0.011 0-1.090 0-1.973-0.883-1.973-1.973 0-0.004 0-0.008 0-0.012v0.001zM18.72 20.96h-5.44c-0.896 0-1.6-0.736-1.6-1.632s0.704-1.632 1.6-1.632h5.44c0.896 0 1.632 0.736 1.632 1.632s-0.736 1.632-1.632 1.632zM20.608 15.68c-0.003 0-0.007 0-0.011 0-1.090 0-1.973-0.883-1.973-1.973 0-0.004 0-0.008 0-0.012v0.001c0-1.088 0.896-1.984 1.984-1.984s1.984 0.896 1.984 1.984c0 1.12-0.864 1.984-1.984 1.984zM19.648 27.808h-7.232c-0.576 0-1.024 0.48-1.024 1.056v0.096c0 0.576 0.448 1.056 1.024 1.056h7.2c0.576 0 1.056-0.48 1.056-1.056v-0.096c0-0.576-0.48-1.056-1.024-1.056z"})])])],-1)),s(K)])]))}}),s0=I(X,[["__scopeId","data-v-aaad5d86"]]);export{s0 as default};
